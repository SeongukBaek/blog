---
title: "💻 Web Server와 WAS"
description: "백엔드 지식"
date: 2022-07-11
update: 2022-07-11
tags:
  - WebServer
  - WAS
series: "💻 BackEnd"
---

## 💡 정적 페이지와 동적 페이지
<img src="https://gmlwjd9405.github.io/images/web/static-vs-dynamic.png" width="80%">

먼저 정적 페이지와 동적 페이지에 대해 정리한다.

### 😇 정적 페이지 (Static Pages)
> 바뀌지 않는 페이지

서버에 미리 저장된 파일이 그대로 전달되는 웹 페이지로, 서버는 사용자의 요청에 해당하는 저장된 웹 페이지를 응답한다.
- 따라서 사용자는 서버에 저장된 데이터가 변경되지 않는 한 고정된 웹 페이지를 보게 된다.

**장점으로는,**
- 요청에 대한 파일만 전송하면 되기에 빠르다.
- 웹 서버의 구축만 필요로 하므로 비용이 적다.

**단점으로는,**
- 저장된 정보만 보여줄 수 있으므로 서비스가 한정적이다.
- 추가, 수정, 삭제 등의 작업이 모두 수동적이므로 관리가 어렵다.

### 😇 동적 페이지 (Dynamic Pages)
> 요청에 따라 바뀌는 페이지

서버는 사용자의 요청에 맞게 동적인 응답을 반환한다. 서버에 의해 실행되는 프로그램을 통해 만들어지는 결과물을 확인할 수 있다.
- 요청에 따라 다양한 웹 페이지를 볼 수 있다.

**장점으로는,**
- 다양한 정보를 조합해 동적으로 생성하여 제공하므로 다양한 서비스가 가능하다.
- 추가, 수정, 삭제 등의 작업이 용이하므로 관리가 쉽다.

**단점으로는,**
- 사용자에게 웹 페이지를 전달하기 전 처리 작업이 필요하기에 상대적으로 느리다.
- 웹 서버외에 추가적 처리를 위한 Web Application Server가 필요하기에 추가 비용이 발생한다.

---

<img src="https://gmlwjd9405.github.io/images/web/webserver-vs-was1.png" width="80%">

## 💡 Web Server란?
웹 서버는 HTTP 프로토콜을 기반으로, 클라이언트의 요청을 서비스하는 기능을 담당한다.
- 소프트웨어: 웹 브라우저 클라이언트로부터 HTTP 요청을 받아들이고, 정적인 컨텐츠(HTML, CSS 등)를 제공하는 프로그램
- 하드웨어: Web 서버가 설치되어 있는 컴퓨터

### 😇 기능
요청에 맞게 두 가지 기능 중 선택해 제공한다.
- 정적 컨텐츠 제공: WAS를 거치지 않고 바로 자원을 제공한다.
- 동적 컨텐츠 제공을 위한 요청 전달: 클라이언트의 요청을 WAS로 보내고, WAS의 결과를 클라이언트에게 전달한다.

### 😇 종류
Apache, Nginx, IIS 등이 있다.

---

## 💡 Web Application Server란?
위 그림에서 볼 수 있듯, Web Server + Web Container가 합쳐진 개념으로, DB 조회 및 다양한 로직 처리 요구 시 동적인 컨텐츠를 제공하기 위해 만들어진 애플리케이션 서버이다.
- HTTP를 통해 애플리케이션을 수행해주는 미들웨어다.

> **컨테이너**
> - JSP, Servlet을 실행시킬 수 있는 소프트웨어

### 😇 기능
- 프로그램 실행 환경 및 DB 접속 기능 제공
- 여러 트랜잭션 관리 기능
- 비즈니스 로직 수행

### 😇 종류
Tomcat, JBoss 등이 있다.

---

## 💡 Web Server와 WAS를 구분하는 이유?
각각이 필요한 이유가 있기 때문에 구분한다.

### 😇 Web Server가 필요한 이유
웹 서버에서는 정적 컨텐츠만을 처리하도록 기능 분배를 하여 서버의 부담을 줄일 수 있다.

클라이언트가 이미지 파일(정적 컨텐츠)을 보낸다고 가정하자.
- 웹 문서(HTML 문서)가 클라이언트로 보내질 때 이미지 파일과 같은 정적 파일은 함께 보내지지 않는다.
  - 먼저 HTML 문서를 받고, 이에 필요한 이미지 파일들을 다시 서버로 요청해서 받아온다.
- 따라서, **웹 서버를 통해 정적인 파일을 애플리케이션 서버까지 가지 않고 앞단에 빠르게 보낼 수 있다.**

### 😇 WAS가 필요한 이유
요청에 맞는 데이터를 DB에서 가져와 비즈니스 로직에 맞게 그때마다의 결과를 만들고 제공하면서 자원의 효율적인 사용이 가능해진다.

동적인 컨텐츠를 제공해야 하는 상황
- 웹 서버만으로는 사용자가 원하는 요청에 대한 결과값을 모두 미리 만들어놓고 제공하기에 자원이 절대적으로 부족하다.
- 따라서, **WAS를 통해 요청이 들어올 때마다 DB와 비즈니스 로직을 통해 결과물을 만들어 제공한다.**

> 만약 WAS가 정적 컨텐츠 요청까지 모두 처리한다면, 서버의 부하가 커지고, 동적 컨텐츠 처리가 지연되어 수행 속도가 느려진다.
> - 따라서 **기능을 분리시켜 서버 부하를 방지하고자 나누었다.**

### 😇 가장 효율적인 방법
> 웹 서버를 WAS 앞에 두고, 필요한 WAS들을 웹 서버에 플러그인 혀앹로 설정하여 효율적인 분산 처리가 가능하게 한다.

<img src="https://gmlwjd9405.github.io/images/web/web-service-architecture.png" width="80%">

- 클라이언트의 요청을 먼저 웹 서버가 받은 다음, WAS에 보내 관련된 Servlet을 메모리에 올린다.
- WAS는 `web.xml` 을 참조해 해당 Servlet에 대한 쓰레드를 생성한다. (Thread pool을 사용)
  - 쓰레드를 사용하는 이유는, 클라이언트의 요청이 순차적으로 이어지지 않을 확률이 높고, 수많은 요청이 한 번에 일어나는 경우가 많기에 쓰레드를 생성하여 요청을 처리한다.
- 이때, 컨테이너는 `HttpServletRequest` 와 `HttpServletResponse` 객체를 생성해 Servlet에게 전달한다.
  - 쓰레드는 Servlet의 `service()` 메소드를 호출하고, 해당 메소드는 요청에 맞게 `doGet()` 이나 `doPost()` 메소드를 호출한다.
- 요청에 맞게 생성된 동적 페이지를 `Response` 객체에 담아 WAS에 전달한다.
- WAS는 `Response` 객체를 `HttpServletResponse` 형태로 바꿔 웹 서버로 전달한다.
- 생성된 쓰레드를 종료하고, `HttpServletRequest` 와 `HttpServletResponse` 객체를 제거한다.

---

## 📕 참고
- [정적인 페이지와 동적인 페이지의 차이점이란?](https://titus94.tistory.com/4)
- [Web Server와 WAS의 차이](https://gyoogle.dev/blog/web-knowledge/Web%20Server%EC%99%80%20WAS%EC%9D%98%20%EC%B0%A8%EC%9D%B4.html)
- [[기본] WEB과 WAS 차이](https://helloworld-88.tistory.com/71)
- [[WAS] Web Application Server 구현하기](https://webfirewood.tistory.com/category/language/Servlet%26JSP)