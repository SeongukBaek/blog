---
title: "π“ 12. μ¤ν”„λ§ λ°μ΄ν„° JPA"
description: "JPA μ±… μ •λ¦¬"
date: 2022-04-01
update: 2022-04-01
tags:
  - Java
  - JPA
  - SpringBoot
series: "π“ ORM ν‘μ¤€ JPA"
---

<em>[μλ°” ORM ν‘μ¤€ JPA ν”„λ΅κ·Έλλ° - κΉ€μν•]μ„ μ½κ³  μΈμ©ν•κ³  μ •λ¦¬ν•λ” POSTμ…λ‹λ‹¤.</em>

> λ‘ λ ν¬μ§€ν† λ¦¬κ°€ λΉ„μ·ν• κΈ°λ¥μ„ ν•λ‹¤λ©΄, μ λ„¤λ¦­κ³Ό μƒμ†μ„ μ μ ν μ‚¬μ©ν•΄ κ³µν†µ λ¶€λ¶„μ„ μ²λ¦¬ν•λ” λ¶€λ¨ ν΄λμ¤λ¥Ό λ§λ“¤ μ μλ‹¤.
> - μ΄λ¥Ό λ³΄ν†µ `GenenricDAO` λΌ ν•λ‹¤.
> - ν•μ§€λ§ μ΄ λ°©λ²•μ€ κ³µν†µ κΈ°λ¥μ„ κµ¬ν„ν• λ¶€λ¨ ν΄λμ¤μ— λ„λ¬΄ μΆ…μ†λκ³  κµ¬ν„ ν΄λμ¤ μƒμ†μ΄ κ°€μ§€λ” λ‹¨μ μ— λ…Έμ¶λλ‹¤.

## π’« μ¤ν”„λ§ λ°μ΄ν„° JPA μ†κ°
μ¤ν”„λ§ ν”„λ μ„μ›ν¬μ—μ„ JPAλ¥Ό νΈν•κ² μ‚¬μ©ν•  μ μλ„λ΅ μ§€μ›ν•λ” ν”„λ΅μ νΈλ‹¤. 
- CRUDλ¥Ό μ²λ¦¬ν•κΈ° μ„ν• κ³µν†µ μΈν„°νμ΄μ¤(`org.springframework.data.jpa.repository.JpaRepository`)λ¥Ό μ κ³µν•λ‹¤.
  - λ ν¬μ§€ν† λ¦¬ κ°λ° μ‹ μΈν„°νμ΄μ¤λ§ μ‘μ„±ν•λ©΄ μ‹¤ν–‰ μ‹μ μ— μ¤ν”„λ§ λ°μ΄ν„° JPAκ°€ κµ¬ν„ κ°μ²΄λ¥Ό λ™μ μΌλ΅ μƒμ„±ν•΄ μ£Όμ…ν•΄μ¤€λ‹¤.

> λ°μ΄ν„° μ ‘κ·Ό κ³„μΈµμ„ κ°λ°ν•  λ•, **κµ¬ν„ ν΄λμ¤ μ—†μ΄ μΈν„°νμ΄μ¤λ§ μ‘μ„±ν•΄λ„ κ°λ°μ„ μ™„λ£**ν•  μ μλ‹¤.

μΌλ°μ μΈ CRUD λ©”μ†λ“λ” μ κ³µν•κΈ°μ— λ¬Έμ κ°€ μ—†μ§€λ§, μ§μ ‘ μ‘μ„±ν• κ³µν†µμΌλ΅ μ²λ¦¬ν•  μ μ—†λ” λ©”μ†λ“μ κ²½μ°λ” μ¤ν”„λ§ λ°μ΄ν„° JPAκ°€ λ©”μ†λ“ μ΄λ¦„μ„ λ¶„μ„ν•΄ μ μ ν• JPQLμ„ μ‹¤ν–‰ν•λ‹¤.

### β° μ¤ν”„λ§ λ°μ΄ν„° ν”„λ΅μ νΈ
μ¤ν”„λ§ λ°μ΄ν„° ν”„λ΅μ νΈλ” JPA, λ½κ³  DB, NEO4J, REDIS, HADOOP, GEMFIRE κ°™μ€ λ‹¤μ–‘ν• λ°μ΄ν„° μ €μ¥μ†μ— λ€ν• μ ‘κ·Όμ„ μ¶”μƒν™”ν•μ—¬ κ°λ°μ νΈμλ¥Ό μ κ³µν•κ³ , μ§€λ£¨ν•κ² λ°λ³µν•λ” λ°μ΄ν„° μ ‘κ·Ό μ½”λ“λ¥Ό μ¤„μ—¬μ¤€λ‹¤.
- μ—¬κΈ°μ„ μ¤ν”„λ§ λ°μ΄ν„° JPA ν”„λ΅μ νΈλ” JPAμ— νΉν™”λ κΈ°λ¥μ„ μ κ³µν•λ‹¤.

---

## π’« μ¤ν”„λ§ λ°μ΄ν„° JPA μ„¤μ •
**π“ ν•„μ” λΌμ΄λΈλ¬λ¦¬**<br/>
- `spring-data-jpa`

**π“ ν™κ²½μ„¤μ •**<br/>
μ¤ν”„λ§ μ„¤μ •μ— `base-package` λ¥Ό λ…μ‹ν•κ³ , `EnableJpaRepositories` annotationμ `basePackages` μ— λ ν¬μ§€ν† λ¦¬λ¥Ό κ²€μƒ‰ν•  ν¨ν‚¤μ§€ μ„μΉλ¥Ό μ μμΌλ΅μ¨, μ¤ν”„λ§ λ°μ΄ν„° JPAλ” μ• ν”λ¦¬μΌ€μ΄μ… μ‹¤ν–‰ μ‹ `basePackages` μ— μλ” λ ν¬μ§€ν† λ¦¬ μΈν„°νμ΄μ¤λ“¤μ„ μ°Ύμ•„ ν•΄λ‹Ή μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν• ν΄λμ¤λ¥Ό λ™μ μΌλ΅ μƒμ„±ν• λ‹¤μ μ¤ν”„λ§ λΉμΌλ΅ λ“±λ΅ν•λ‹¤.
- λ”°λΌμ„ μ§μ ‘ κµ¬ν„ ν΄λμ¤λ¥Ό κµ¬ν„ν•μ§€ μ•μ•„λ„ λλ” κ²ƒμ΄λ‹¤.

---

## π’« κ³µν†µ μΈν„°νμ΄μ¤ κΈ°λ¥
μ¤ν”„λ§ λ°μ΄ν„° JPAλ¥Ό μ‚¬μ©ν•λ” κ°€μ¥ λ‹¨μν• λ°©λ²•μ€ `JpaRepository` μΈν„°νμ΄μ¤λ¥Ό μƒμ†λ°›λ” κ²ƒμ΄λ‹¤.
- κ·Έλ¦¬κ³  μ λ„¤λ¦­μ— μ—”ν‹°ν‹° ν΄λμ¤μ™€ μ—”ν‹°ν‹° ν΄λμ¤κ°€ μ‚¬μ©ν•λ” μ‹λ³„μ νƒ€μ…μ„ μ§€μ •ν•λ‹¤.

```java
public interface JpaRepository<T, ID extends Serializable> extends PagingAndSortingRepository<T, ID> {...}

public interface MemberRepository extends JpaRepository<Member, Long> {...}
```

**π“ JpaRepository μΈν„°νμ΄μ¤μ κ³„μΈµκµ¬μ΅°**<br/>
μ¤ν”„λ§ λ°μ΄ν„° λ¨λ“μ΄ μκ³ , κ·Έ μ•μ— `Repository` , `CrudRepository` , `PagingAndSortingRepository` κ°€ μλ‹¤. μ΄λ“¤μ€ μ¤ν”„λ§ λ°μ΄ν„° ν”„λ΅μ νΈκ°€ κ³µν†µμΌλ΅ μ‚¬μ©ν•λ” μΈν„°νμ΄μ¤λ‹¤.
- μ¤ν”„λ§ λ°μ΄ν„° JPAκ°€ μ κ³µν•λ” `JpaRepository` μΈν„°νμ΄μ¤λ” μ—¬κΈ°μ— μ¶”κ°€λ΅ JPAμ— νΉν™”λ κΈ°λ¥μ„ μ κ³µν•λ‹¤.

μ•„λλ” `JpaRepository` μΈν„°νμ΄μ¤μ μ£Όμ” λ©”μ†λ“μ΄λ‹¤.
- `save(S)` , `delete(T)` , `findOne(ID)` , `getOne(ID)` , `findAll(...)` (T: μ—”ν‹°ν‹°, ID: μ—”ν‹°ν‹°μ μ‹λ³„μ νƒ€μ…, S: μ—”ν‹°ν‹°μ™€ κ·Έ μμ‹ νƒ€μ…)
- `save(S)` λ” μ—”ν‹°ν‹°μ— μ‹λ³„μ κ°’μ΄ μ—†μΌλ©΄(`null`μ΄λ©΄) μƒλ΅μ΄ μ—”ν‹°ν‹°λ΅ νλ‹¨ν•΄μ„ `em.persist()` λ¥Ό νΈμ¶ν•κ³ , μ‹λ³„μ κ°’μ΄ μμΌλ©΄ μ΄λ―Έ μλ” μ—”ν‹°ν‹°λ΅ νλ‹¨ν•΄ `em.merge()` λ¥Ό νΈμ¶ν•λ‹¤.

---

## π’« μΏΌλ¦¬ λ©”μ†λ“ κΈ°λ¥
λ©”μ†λ“ μ΄λ¦„λ§μΌλ΅ μΏΌλ¦¬λ¥Ό μƒμ„±ν•λ” λ“± λ§¤μ° νΈλ¦¬ν• κΈ°λ¥μ΄λ‹¤. μ¤ν”„λ§ λ°μ΄ν„° JPAκ°€ μ κ³µν•λ” μΏΌλ¦¬ λ©”μ†λ“ κΈ°λ¥μ€ ν¬κ² μ•„λ 3κ°€μ§€κ°€ μλ‹¤.
- λ©”μ†λ“ μ΄λ¦„μΌλ΅ μΏΌλ¦¬ μƒμ„±
- λ©”μ†λ“ μ΄λ¦„μΌλ΅ JPA NamedQuery νΈμ¶
- `@Query` annotationμ„ μ‚¬μ©ν•΄ λ ν¬μ§€ν† λ¦¬ μΈν„°νμ΄μ¤μ— μΏΌλ¦¬ μ§μ ‘ μ •μ

### β° λ©”μ†λ“ μ΄λ¦„μΌλ΅ μΏΌλ¦¬ μƒμ„±
μΈν„°νμ΄μ¤μ— μ •μν• `findByEmailAndName(...)` λ©”μ†λ“λ¥Ό μ‹¤ν–‰ν•λ©΄, μ¤ν”„λ§ λ°μ΄ν„° JPAλ” λ©”μ†λ“ μ΄λ¦„μ„ λ¶„μ„ν•΄ JPQLμ„ μƒμ„±ν•κ³  μ‹¤ν–‰ν•λ‹¤.
- λ¬Όλ΅  μ΄λ¥Ό μ„ν•΄μ„λ” μ •ν•΄μ§„ κ·μΉ™μ— λ”°λΌ λ©”μ†λ“ μ΄λ¦„μ„ μ§€μ–΄μ•Ό ν•λ‹¤. (μ¤ν”„λ§ λ°μ΄ν„° JPA κ³µμ‹ λ¬Έμ„ μ°Έκ³ )
- **μ—”ν‹°ν‹°μ ν•„λ“λ…μ΄ λ³€κ²½λλ©΄, μΈν„°νμ΄μ¤μ— μ •μν• λ©”μ†λ“ μ΄λ¦„λ„ ν•¨κ» λ³€κ²½**ν•΄μ•Ό ν•λ‹¤.

### β° JPA NamedQuery
JPA Named μΏΌλ¦¬λ” μ΄λ¦„ κ·Έλ€λ΅ μΏΌλ¦¬μ— μ΄λ¦„μ„ λ¶€μ—¬ν•΄ μ‚¬μ©ν•λ” λ°©λ²•μΈλ°, annotationμ΄λ‚ XMLμ— μΏΌλ¦¬λ¥Ό μ •μν•  μ μλ‹¤. μ΄μ „μ— λ‹¤λ£¬ NamedQueryμ™€ λ™μΌν•λ‹¤. λν•, Named λ„¤μ΄ν‹°λΈ μΏΌλ¦¬λ„ μ§€μ›ν•λ‹¤.
- μ¤ν”„λ§ λ°μ΄ν„° JPAλ¥Ό μ‚¬μ©ν•λ©΄ λ©”μ†λ“ μ΄λ¦„λ§μΌλ΅ Named μΏΌλ¦¬λ¥Ό νΈμ¶ν•  μ μλ‹¤.
- μ„ μ–Έν• "λ„λ©”μΈ ν΄λμ¤ + . + λ©”μ†λ“ μ΄λ¦„" μΌλ΅ Named μΏΌλ¦¬λ¥Ό μ°Ύμ•„μ„ μ‹¤ν–‰ν•λ‹¤.
  - λ§μ•½ μ‹¤ν–‰ν•  Named μΏΌλ¦¬κ°€ μ—†λ‹¤λ©΄ λ©”μ†λ“ μ΄λ¦„μΌλ΅ μΏΌλ¦¬ μƒμ„± μ „λµμ„ μ‚¬μ©ν•λ‹¤.

### β° @Query, λ ν¬μ§€ν† λ¦¬ λ©”μ†λ“μ— μΏΌλ¦¬ μ •μ
`Query` annotationμ„ μ‚¬μ©ν•΄ λ ν¬μ§€ν† λ¦¬ λ©”μ†λ“μ— μ§μ ‘ μΏΌλ¦¬λ¥Ό μ •μν•  μ μλ‹¤.
- μ‹¤ν–‰ν•  λ©”μ†λ“μ— μ •μ  μΏΌλ¦¬λ¥Ό μ§μ ‘ μ‘μ„±ν•κΈ°μ— μ΄λ¦„μ—†λ” Named μΏΌλ¦¬λΌ ν•  μ μλ‹¤.
- λν• μ• ν”λ¦¬μΌ€μ΄μ… μ‹¤ν–‰ μ‹μ μ— λ¬Έλ²• μ¤λ¥λ¥Ό λ°κ²¬ν•  μ μλ‹¤λ” μ¥μ μ΄ μλ‹¤.

```java
public interface MemberRepository extends JpaRepository<Member, Long> {

  @Query("select m from Member m where m.username = ?1")
  Member findByUsername(String username);

}
```

λ„¤μ΄ν‹°λΈ SQLμ„ μ‚¬μ©ν•λ ¤λ©΄ `@Query` annotationμ— `nativeQuery = true` λ¥Ό μ„¤μ •ν•λ‹¤.
- μ°Έκ³ λ΅ μ¤ν”„λ§ λ°μ΄ν„° JPAκ°€ μ§€μ›ν•λ” νλΌλ―Έν„° λ°”μΈλ”©μ„ μ‚¬μ©ν•λ©΄ **JPQLμ€ μ„μΉ κΈ°λ° νλΌλ―Έν„°λ¥Ό 1λ¶€ν„° μ‹μ‘**ν•μ§€λ§ **λ„¤μ΄ν‹°λΈ SQLμ€ 0λ¶€ν„° μ‹μ‘**ν•λ‹¤.

### β° νλΌλ―Έν„° λ°”μΈλ”©
μ„μΉ κΈ°λ° νλΌλ―Έν„° λ°”μΈλ”©κ³Ό μ΄λ¦„ κΈ°λ° νλΌλ―Έν„° λ°”μΈλ”©μ„ μ§€μ›ν•λ‹¤. (κΈ°λ³Έ κ°’μ€ μ„μΉ κΈ°λ°, νλΌλ―Έν„° μμ„λ΅ λ°”μΈλ”©)
- μ΄λ¦„ κΈ°λ° νλΌλ―Έν„° λ°”μΈλ”© μ‚¬μ©μ„ μ„ν•΄μ„λ” `Param` annotationμ„ μ‚¬μ©ν•λ‹¤. (ex. `@Param("name")`)

### β° λ²ν¬μ„± μμ • μΏΌλ¦¬
`executeUpdate()` λ©”μ†λ“λ΅ λ²ν¬ μ—°μ‚°μ„ μν–‰ν•  μ μλ‹¤.

```java
@Modifying
@Query("update Product p set p.price = p.price * 1.1 where p.stockAmount < :stockAmount")
int bulkPriceUp(@Param("stockAmount") String stockAmount);
```
- μ¤ν”„λ§ λ°μ΄ν„° JPAμ—μ„ λ²ν¬μ„± μμ •, μ‚­μ  μΏΌλ¦¬λ” `Modifying` annotationμ„ μ‚¬μ©ν•λ©΄ λλ‹¤.
- λ²ν¬μ„± μΏΌλ¦¬ μ‹¤ν–‰ ν›„ μμ†μ„± μ»¨ν…μ¤νΈλ¥Ό μ΄κΈ°ν™”ν•λ ¤λ©΄ `Modifying` annotationμ `clearAutomatically` μ†μ„±μ„ `true` λ΅ μ„¤μ •ν•λ©΄ λλ‹¤. (κΈ°λ³Έ κ°’ : `false`)

### β° λ°ν™ νƒ€μ…
μ¤ν”„λ§ λ°μ΄ν„° JPAλ” μ μ—°ν• λ°ν™ νƒ€μ…μ„ μ§€μ›ν•λ‹¤.
- **κ²°κ³Όκ°€ ν• κ±΄ μ΄μƒμ΄λ©΄ μ»¬λ ‰μ… μΈν„°νμ΄μ¤**
- **λ‹¨κ±΄μ΄λ©΄ λ°ν™ νƒ€μ…μ„ μ§€μ •**

μ΅°ν κ²°κ³Όκ°€ μ—†λ‹¤λ©΄, μ»¬λ ‰μ…μ€ λΉ μ»¬λ ‰μ…, λ‹¨κ±΄μ€ `null` μ„ λ°ν™ν•λ‹¤.
- λ‹¨κ±΄μ„ κΈ°λ€ν•κ³  λ°ν™ νƒ€μ…μ„ μ§€μ •ν–λ”λ° 2κ±΄ μ΄μƒ μ΅°νλλ©΄ `NonUniqueResultException` μμ™Έκ°€ λ°μƒν•λ‹¤.

> μ¤ν”„λ§ λ°μ΄ν„° JPAλ” λ‹¨κ±΄ μ΅°ν μ‹ JPQLμ `Query.getSingleResult()` νΈμ¶λ΅ μΈν•΄ λ°μƒν•  μ μλ” `NoResultException` μμ™Έκ°€ λ°μƒν•κ² λλ©΄, μ΄λ¥Ό λ¬΄μ‹ν•κ³  `null` μ„ λ°ν™ν•λ‹¤.

### β° νμ΄μ§•κ³Ό μ •λ ¬
νμ΄μ§•κ³Ό μ •λ ¬ κΈ°λ¥μ„ μ„ν• 2κ°€μ§€ νλΌλ―Έν„°λ¥Ό μ κ³µν•λ‹¤.
- `org.springframework.data.domain.Sort` : μ •λ ¬ κΈ°λ¥
- `org.springframework.data.domain.Pageable` : νμ΄μ§• κΈ°λ¥(λ‚΄λ¶€μ— Sort ν¬ν•¨)

νλΌλ―Έν„°μ— `Pageable` μ„ μ‚¬μ©ν•λ©΄ λ°ν™ νƒ€μ…μΌλ΅ `List` λ‚ `org.springframework.data.domain.Page` λ¥Ό μ‚¬μ©ν•  μ μλ‹¤.
- λ°ν™ νƒ€μ…μΌλ΅ `Page` λ¥Ό μ‚¬μ©ν•λ©΄ μ¤ν”„λ§ λ°μ΄ν„° JPAλ” νμ΄μ§• κΈ°λ¥μ„ μ κ³µν•κΈ° μ„ν•΄ κ²€μƒ‰λ μ „μ²΄ λ°μ΄ν„° κ±΄μλ¥Ό μ΅°νν•λ” `count` μΏΌλ¦¬λ¥Ό μ¶”κ°€λ΅ νΈμ¶ν•λ‹¤.

---

## π’« λ…μ„Έ
μ±… λ„λ©”μΈ μ£Όλ„ μ„¤κ³„(Domain Driven Design)λ” λ…μ„Έ(SPECIFICATION)λΌλ” κ°λ…μ„ μ†κ°ν•λ‹¤. μ¤ν”„λ§ λ°μ΄ν„° JPAλ” JPA Criteriaλ΅ μ΄ κ°λ…μ„ μ‚¬μ©ν•  μ μλ„λ΅ μ§€μ›ν•λ‹¤. μ΄λ¥Ό μ΄ν•΄ν•κΈ° μ„ν• ν•µμ‹¬ λ‹¨μ–΄λ” μ μ–΄(predicate)μΈλ° μ΄λ” λ‹¨μν μ°Έμ΄λ‚ κ±°μ§“μΌλ΅ ν‰κ°€λλ‹¤.
- κ·Έλ¦¬κ³  μ΄λ” AND, OR κ°™μ€ μ—°μ‚°μλ΅ μ΅°ν•©ν•  μ μλ‹¤.
- ex. λ°μ΄ν„°λ¥Ό κ²€μƒ‰ν•κΈ° μ„ν• μ μ•½ μ΅°κ±΄ ν•λ‚ν•λ‚λ¥Ό μ μ–΄λΌ ν•  μ μλ‹¤.
- μ΄ μ μ–΄λ¥Ό μ¤ν”„λ§ λ°μ΄ν„° JPAλ” `org.springframework.data.jpa.domain.Specification` ν΄λμ¤λ΅ μ •μν–λ‹¤.

`Specification` μ€ μ»΄ν¬μ§€νΈ ν¨ν„΄(Composite pattern)μΌλ΅ κµ¬μ„±λμ–΄ μμ–΄ μ—¬λ¬ `Specification` μ„ μ΅°ν•©ν•  μ μλ‹¤.
- λ ν¬μ§€ν† λ¦¬μ—μ„ `org.springframework.data.jpa.repository.JpaSpecificationExecutor` μΈν„°νμ΄μ¤λ¥Ό μƒμ†λ°›μ•„ λ…μ„Έ κΈ°λ¥μ„ μ‚¬μ©ν•  μ μλ‹¤.
- λ…μ„Έλ¥Ό μ •μν•λ ¤λ©΄, μƒμ†λ°›μ€ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•λ©΄ λλ‹¤.
  - λ…μ„Έ μ •μ μ‹μ—λ” `toPredicate(...)` λ©”μ†λ“λ§ κµ¬ν„ν•λ©΄ λλ”λ°, JPA Criteriaμ `Root` , `CriteriaQuery` , `CriteriaBuilder` ν΄λμ¤κ°€ λ¨λ‘ νλΌλ―Έν„°λ΅ μ£Όμ–΄μ§„λ‹¤.

---

## π’« μ‚¬μ©μ μ •μ λ ν¬μ§€ν† λ¦¬ κµ¬ν„
λ‹¤μ–‘ν• μ΄μ λ΅, μƒμ†λ°›μ€ μΈν„°νμ΄μ¤μ— λ€ν• κµ¬ν„μ΄ ν•„μ”ν•  λ•κ°€ μλ‹¤. κ·Έλ ‡λ‹¤κ³  ν•΄μ„ λ ν¬μ§€ν† λ¦¬λ¥Ό μ§μ ‘ κµ¬ν„ν•λ©΄ κ³µν†µ μΈν„°νμ΄μ¤κ°€ μ κ³µν•λ” κΈ°λ¥κΉμ§€ κµ¬ν„ν•΄μ•Ό ν•λ‹¤. 
- μ¤ν”„λ§ λ°μ΄ν„° JPAλ” μ΄λ° λ¬Έμ λ¥Ό μ°νν•΄μ„ ν•„μ”ν• λ©”μ†λ“λ§ κµ¬ν„ν•  μ μλ” λ°©λ²•μ„ μ κ³µν•λ‹¤.

1. μ§μ ‘ κµ¬ν„ν•  λ©”μ†λ“λ¥Ό μ„ν• μ‚¬μ©μ μ •μ μΈν„°νμ΄μ¤λ¥Ό μ‘μ„±ν•΄μ•Ό ν•λ‹¤.
2. μ‚¬μ©μ μ •μ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν• ν΄λμ¤λ¥Ό μ‘μ„±ν•΄μ•Ό ν•λ‹¤. 
    - λ ν¬μ§€ν† λ¦¬ μΈν„°νμ΄μ¤ μ΄λ¦„ + `Impl` λ΅ μ§€μ–΄μ•Ό μ¤ν”„λ§ λ°μ΄ν„° JPAκ°€ μ‚¬μ©μ μ •μ κµ¬ν„ ν΄λμ¤λ΅ μΈμ‹ν•λ‹¤.
3. λ ν¬μ§€ν† λ¦¬ μΈν„°νμ΄μ¤μ—μ„ μ‚¬μ©μ μ •μ μΈν„°νμ΄μ¤λ¥Ό μƒμ†λ°›μΌλ©΄ λλ‹¤. (λ ν¬μ§€ν† λ¦¬ μΈν„°νμ΄μ¤λ” κ²°κ³Όμ μΌλ΅ `JpaRepository` μ™€ μ‚¬μ©μ μ •μ μΈν„°νμ΄μ¤λ¥Ό μƒμ†λ°›μ)

---

## π’« Web ν™•μ¥
μ¤ν”„λ§ λ°μ΄ν„° ν”„λ΅μ νΈλ” μ¤ν”„λ§ MVCμ—μ„ μ‚¬μ©ν•  μ μλ” νΈλ¦¬ν• κΈ°λ¥μ„ μ κ³µν•λ‹¤. μ‹λ³„μλ΅ λ„λ©”μΈ ν΄λμ¤λ¥Ό λ°”λ΅ λ°”μΈλ”©ν•΄μ£Όλ” λ„λ©”μΈ ν΄λμ¤ μ»¨λ²„ν„° κΈ°λ¥κ³Ό νμ΄μ§•, μ •λ ¬ κΈ°λ¥μ— λ€ν•΄ μ•μ•„λ³΄μ.

### β° μ„¤μ •
`org.springframework.data.web.config.SpringDataWebConfiguration` μ„ μ¤ν”„λ§ λΉμΌλ΅ λ“±λ΅ν•λ©΄ Web ν™•μ¥ κΈ°λ¥μ„ μ‚¬μ©ν•  μ μλ‹¤. 
- JavaConfigλ¥Ό μ‚¬μ©ν•λ©΄ `EnableSpringDataWebSupport` annotationμ„ `WebAppConfig.java` μ— μ‚¬μ©ν•λ©΄ λλ‹¤.

### β° λ„λ©”μΈ ν΄λμ¤ μ»¨λ²„ν„° κΈ°λ¥
HTTP νλΌλ―Έν„°λ΅ λ„μ–΄μ¨ μ—”ν‹°ν‹°μ μ•„μ΄λ””λ΅ μ—”ν‹°ν‹° κ°μ²΄λ¥Ό μ°Ύμ•„μ„ λ°”μΈλ”©ν•΄μ£Όλ” κΈ°λ¥μ΄λ‹¤. 
- νΉμ • νμ›μ„ μμ •ν•λ” ν™”λ©΄μ„ λ³΄μ—¬μ£Όλ ¤λ©΄ μ»¨νΈλ΅¤λ¬λ” HTTP μ”μ²­μΌλ΅ λ„μ–΄μ¨ νμ›μ μ•„μ΄λ””λ¥Ό μ‚¬μ©ν•΄ λ ν¬μ§€ν† λ¦¬λ¥Ό ν†µν•΄ νμ› μ—”ν‹°ν‹°λ¥Ό λ¨Όμ € μ΅°νν•΄μ•Ό ν•λ‹¤.
- μ΄ν›„ μ°Ύμ•„μ¨ νμ› μ—”ν‹°ν‹°λ¥Ό `model` μ„ μ‚¬μ©ν•΄μ„ λ·°μ— λ„κ²¨μ¤€λ‹¤.

```java
// λ„λ©”μΈ ν΄λμ¤ μ»¨λ²„ν„°λ¥Ό μ μ©
@Controller
public class MemberController {

  @RequestMapping("member/memberUpdateForm")
  public String memberUpdateForm(@RequestParam("id") Member member, Model model) {
    model.addAttribute("member", member);
    return "member/memberSaveForm";
  }
}
```
- `@RequestParam("id") Member member` λ¥Ό λ³΄λ©΄ HTTP μ”μ²­μΌλ΅ νμ› μ•„μ΄λ””(`id`)λ¥Ό λ°›μ§€λ§ λ„λ©”μΈ ν΄λμ¤ μ»¨λ²„ν„°κ°€ μ¤‘κ°„μ— λ™μ‘ν•΄ μ•„μ΄λ””λ¥Ό νμ› μ—”ν‹°ν‹° κ°μ²΄λ΅ λ³€ν™ν•΄μ„ λ„κ²¨μ¤€λ‹¤.
  - λ”°λΌμ„ μ»¨νΈλ΅¤λ¬λ¥Ό λ‹¨μν•κ² μ‚¬μ©ν•  μ μλ‹¤.

> λ„λ©”μΈ ν΄λμ¤ μ»¨λ²„ν„°λ” ν•΄λ‹Ή μ—”ν‹°ν‹°μ™€ κ΄€λ ¨λ λ ν¬μ§€ν† λ¦¬λ¥Ό μ‚¬μ©ν•΄μ„ μ—”ν‹°ν‹°λ¥Ό μ°Ύλ”λ‹¤. λ„μ–΄μ¨ μ—”ν‹°ν‹°λ¥Ό μ»¨νΈλ΅¤λ¬μ—μ„ μ§μ ‘ μμ •ν•΄λ„ μ‹¤μ  λ°μ΄ν„°λ² μ΄μ¤μ—λ” λ°μλμ§€ μ•λ”λ‹¤. 

### β° νμ΄μ§•κ³Ό μ •λ ¬ κΈ°λ¥
μ¤ν”„λ§ MVCμ—μ„ νμ΄μ§•κ³Ό μ •λ ¬ κΈ°λ¥μ„ νΈλ¦¬ν•κ² μ‚¬μ©ν•κΈ° μ„ν•΄ `HandlerMethodArgumentResolver` λ¥Ό μ κ³µν•λ‹¤.
- νμ΄μ§• κΈ°λ¥: `PageableHandlerMethodArgumentResolver`
- μ •λ ¬ κΈ°λ¥: `SortHandlerMethodArgumentResolver`

νλΌλ―Έν„°λ΅ `Pageable` μ„ λ°›κ³ , μ΄λ” λ‹¤μ μ”μ²­ νλΌλ―Έν„° μ •λ³΄λ΅ λ§λ“¤μ–΄μ§„λ‹¤.
- `page` : ν„μ¬ νμ΄μ§€, 0λ¶€ν„° μ‹μ‘
- `size` : ν• νμ΄μ§€μ— λ…Έμ¶ν•  λ°μ΄ν„° κ±΄μ
- `sort` : μ •λ ¬ μ΅°κ±΄ μ •μ

**π“ μ ‘λ‘μ‚¬**<br/>
μ‚¬μ©ν•΄μ•Ό ν•  νμ΄μ§• μ •λ³΄κ°€ λ‘ μ΄μƒμ΄λ©΄ μ ‘λ‘μ‚¬λ¥Ό μ‚¬μ©ν•΄ κµ¬λ¶„ν•  μ μλ‹¤. μ ‘λ‘μ‚¬λ” μ¤ν”„λ§ ν”„λ μ„μ›ν¬κ°€ μ κ³µν•λ” `@Qualifier` annotationμ„ μ‚¬μ©ν•λ‹¤.

**π“ κΈ°λ³Έκ°’**<br/>
`Pageable` μ κΈ°λ³Έ κ°’μ€ `page = 0` , `size = 20` μ΄λ‹¤. μ΄λ¥Ό λ³€κ²½ν•λ ¤λ©΄ `@PageableDefault` annotationμ„ μ‚¬μ©ν•λ‹¤.

---

## π’« μ¤ν”„λ§ λ°μ΄ν„° JPAκ°€ μ‚¬μ©ν•λ” κµ¬ν„μ²΄
μ¤ν”„λ§ λ°μ΄ν„°κ°€ JPAκ°€ μ κ³µν•λ” κ³µν†µ μΈν„°νμ΄μ¤λ” `org.springframework.data.jpa.repository.support.SimpleJpaRepository` ν΄λμ¤κ°€ κµ¬ν„ν•λ‹¤. ν•΄λ‹Ή ν΄λμ¤ μ½”λ“μ μΌλ¶€λ¥Ό λ¶„μ„ν•΄λ³΄λ©΄ λ‹¤μκ³Ό κ°™λ‹¤.

- `@Repository` μ μ© : JPA μμ™Έλ¥Ό μ¤ν”„λ§μ΄ μ¶”μƒν™”ν• μμ™Έλ΅ λ³€ν™ν•λ‹¤.
- `@Transactional` νΈλμ­μ… μ μ© : **JPAμ λ¨λ“  λ³€κ²½μ€ νΈλμ­μ… μ•μ—μ„ μ΄λ¤„μ Έμ•Ό ν•λ‹¤.** μ¤ν”„λ§ λ°μ΄ν„° JPAκ°€ μ κ³µν•λ” κ³µν†µ μΈν„°νμ΄μ¤λ¥Ό μ‚¬μ©ν•λ©΄ λ°μ΄ν„°λ¥Ό λ³€κ²½(λ“±λ΅, μμ •, μ‚­μ )ν•λ” λ©”μ†λ“μ— `@Transactional` λ΅ νΈλμ­μ… μ²λ¦¬κ°€ λμ–΄ μλ‹¤.
  - λ”°λΌμ„ μ„λΉ„μ¤ κ³„μΈµμ—μ„ νΈλμ­μ…μ„ μ‹μ‘ν•μ§€ μ•μΌλ©΄ λ ν¬μ§€ν† λ¦¬μ—μ„ νΈλμ­μ…μ„ μ‹μ‘ν•λ‹¤. μ„λΉ„μ¤ κ³„μΈµμ—μ„ μ‹μ‘ν–λ‹¤λ©΄ λ ν¬μ§€ν† λ¦¬λ„ μ΄λ¥Ό λ°›μ•„ μ‚¬μ©ν•λ‹¤.
- `@Transactional(readOnly=true)` : λ°μ΄ν„°λ¥Ό μ΅°νν•λ” λ©”μ†λ“μ—λ” ν•΄λ‹Ή μµμ…μ΄ μ μ©λμ–΄ μλ‹¤. λ°μ΄ν„°λ¥Ό λ³€κ²½ν•μ§€ μ•λ” νΈλμ­μ…μ—μ„ ν•΄λ‹Ή μµμ…μ„ μ‚¬μ©ν•λ©΄ ν”λ¬μ‹λ¥Ό μƒλµν•  μ μμ–΄ μ•½κ°„μ μ„±λ¥ ν–¥μƒμ„ μ–»μ„ μ μλ‹¤.
- `save()` λ©”μ†λ“ : μ €μ¥ν•  μ—”ν‹°ν‹°κ°€ μƒλ΅μ΄ μ—”ν‹°ν‹°λ©΄ μ €μ¥(`persist`)ν•κ³ , μ΄λ―Έ μλ” μ—”ν‹°ν‹°λ©΄ λ³‘ν•©(`merge`)ν•λ‹¤.

> μƒλ΅μ΄ μ—”ν‹°ν‹°λ¥Ό νλ‹¨ν•λ” κΈ°λ³Έ μ „λµμ€ μ—”ν‹°ν‹°μ μ‹λ³„μλ¥Ό μ‚¬μ©ν•λ‹¤. μ‹λ³„μκ°€ κ°μ²΄μΌ λ• `null` , μλ°” κΈ°λ³Έ νƒ€μ…μΌ λ• μ«μ 0κ°’μ΄λ©΄ μƒλ΅μ΄ μ—”ν‹°ν‹°λ΅ νλ‹¨ν•λ‹¤.

---

## π’« JPA μƒµμ— μ μ©
### β° ν™κ²½ μ„¤μ •
`pom.xml` μ— `spring-data-jpa` λΌμ΄λΈλ¬λ¦¬λ¥Ό μ¶”κ°€ν•λ‹¤. κ·Έλ¦¬κ³  `appConfig.xml` μ— `<jpa:repositories>` λ¥Ό μ¶”κ°€ν•κ³ , `base-package` μ†μ„±μ— λ ν¬μ§€ν† λ¦¬ μ„μΉλ¥Ό μ§€μ •ν•λ‹¤.

### β° λ ν¬μ§€ν† λ¦¬ λ¦¬ν©ν† λ§
**π“ νμ› λ ν¬μ§€ν† λ¦¬ λ¦¬ν©ν† λ§**
- ν΄λμ¤λ¥Ό μΈν„°νμ΄μ¤λ΅ λ³€κ²½ν•κ³ , μ¤ν”„λ§ λ°μ΄ν„° JPAκ°€ μ κ³µν•λ” `JpaRepository` λ¥Ό μƒμ†λ°›λ”λ‹¤. 
  - μ΄λ• μ λ„¤λ¦­ νƒ€μ…μ„ `<Member, Long>` μΌλ΅ μ§€μ •ν•΄ νμ› λ ν¬μ§€ν† λ¦¬κ°€ κ΄€λ¦¬ν•λ” νμ› μ—”ν‹°ν‹° νƒ€μ…μ μ‹λ³„μ νƒ€μ…μ„ μ •μν•λ‹¤.
- μƒμ†λ°›μ€ `JpaRepository` κ°€ λ¨λ‘ μ κ³µν•λ” κΈ°λ³Έ λ©”μ†λ“λ“¤μ„ μ κ±°ν•λ‹¤. λ‚¨μ€ `findByName()` λ©”μ†λ“λ” μ¤ν”„λ§ λ°μ΄ν„° JPAκ°€ ν•΄λ‹Ή λ©”μ†λ“μ μ΄λ¦„μ„ λ¶„μ„ν•΄ μ μ ν• μΏΌλ¦¬λ¥Ό μ‹¤ν–‰ν•΄ μ¤„ κ²ƒμ΄λ‹¤.

**π“ μƒν’ λ ν¬μ§€ν† λ¦¬ λ¦¬ν©ν† λ§**
- λ¨λ“  κΈ°λ¥μ€ μ¤ν”„λ§ λ°μ΄ν„° JPAκ°€ μ κ³µν•λ” κ³µν†µ μΈν„°νμ΄μ¤λ΅ μ¶©λ¶„ν•΄ λ©”μ†λ“λ¥Ό λ¨λ‘ μ κ±°ν•λ‹¤.

**π“ μ£Όλ¬Έ λ ν¬μ§€ν† λ¦¬ λ¦¬ν©ν† λ§**
- "κ²€μƒ‰"μ΄λΌλ” λ³µμ΅ν• λ΅μ§μ΄ μλ‹¤. λ…μ„Έ κΈ°λ¥μ„ μ‚¬μ©ν•΄ κ²€μƒ‰μ„ κµ¬ν„ν•΄λ³΄λ„λ΅ ν•λ‹¤.
  - κ³µν†µ μΈν„°νμ΄μ¤λ΅ κ°€λ¥ν• λ©”μ†λ“λ“¤μ€ λ¨λ‘ μ κ±°ν•κ³ , `JpaSpecificationExecutor` λ¥Ό μ¶”κ°€λ΅ μƒμ†λ°›λ”λ‹¤.

### β° λ…μ„Έ μ μ©
λ…μ„Έλ¥Ό μ‘μ„±ν•κΈ° μ„ν• ν΄λμ¤λ¥Ό μ¶”κ°€ν•λ‹¤. 

```java
public static Specification<Order> memberNameLike(final String memberName) {
  return new Specificaiton<Order>() {
    public Predicate toPredicate(Root<Order> root, CriteriaQuery<?> query, CriteriaBuilder builder) {
      if (StringUtils.isEmpty(memberName)) return null;

      Join<Order, Member> m = root.join("member", JoinType.INNER);
      return builder.like(m.<String>get("name"), "%" + memberName + "%");
    }
  };
}

public static Specification<Order> orderStatusEq(final OrderStatus orderStatus) {
  return new Specification<Order>() {
    public Predicate toPredicate(Root<Order> root, CriteriaQuery<?> query, CriteriaBuilder builder) {
      if (orderStatus == null) return null;

      return builder.equal(root.get("status"), orderStatus);
    }
  };
}
```
- κ²€μƒ‰μ΅°κ±΄μ„ κ°€μ§€κ³  μλ” `OrderSearch` κ°μ²΄μ— μμ‹ μ΄ κ°€μ§„ κ²€μƒ‰μ΅°κ±΄μΌλ΅ `Specification` μ„ μƒμ„±ν•λ„λ΅ μ½”λ“λ¥Ό μ¶”κ°€ν•λ‹¤.
- κ·Έλ¦¬κ³ , λ ν¬μ§€ν† λ¦¬μ κ²€μƒ‰ μ½”λ“κ°€ λ…μ„Έλ¥Ό νλΌλ―Έν„°λ΅ λ„κΈ°λ„λ΅ λ³€κ²½ν•λ‹¤.

---

## π’« μ¤ν”„λ§ λ°μ΄ν„° JPAμ™€ QueryDSL ν†µν•©
μ¤ν”„λ§ λ°μ΄ν„° JPAλ” 2κ°€μ§€ λ°©λ²•μΌλ΅ QueryDSLμ„ μ§€μ›ν•λ‹¤.
- `org.springframework.data.querydsl.QueryDslPredicateExecutor`
- `org.springframework.data.querydsl.QueryDslRepositorySupport`

### β° QueryDslPredicateExecutor μ‚¬μ©
μ²« λ²μ§Έ λ°©λ²•μ€ λ ν¬μ§€ν† λ¦¬μ—μ„ `QueryDslPredicateExecutor` λ¥Ό μƒμ†λ°›μΌλ©΄ λλ‹¤.

```java
public interface ItemRepository extends JpaRepository<Item, Long>, QueryDslPredicateExecutor<Item> {}
```
- QueryDSLμ„ κ²€μƒ‰μ΅°κ±΄μΌλ΅ μ‚¬μ©ν•λ©΄μ„ μ¤ν”„λ§ λ°μ΄ν„° JPAκ°€ μ κ³µν•λ” νμ΄μ§•κ³Ό μ •λ ¬ κΈ°λ¥λ„ ν•¨κ» μ‚¬μ©ν•  μ μλ‹¤.
- λ‹¤λ§, `join` , `fetch` λ¥Ό μ‚¬μ©ν•  μ μ—†λ‹¤λ” ν•κ³„κ°€ μλ‹¤.
  - λ”°λΌμ„ QueryDSLμ΄ μ κ³µν•λ” λ‹¤μ–‘ν• κΈ°λ¥μ„ μ‚¬μ©ν•λ ¤λ©΄ `JPAQuery` λ¥Ό μ§μ ‘ μ‚¬μ©ν•κ±°λ‚ μ¤ν”„λ§ λ°μ΄ν„° JPAκ°€ μ κ³µν•λ” `QueryDslRepositorySupport` λ¥Ό μ‚¬μ©ν•΄μ•Ό ν•λ‹¤.

### β° QueryDslRepositorySupport μ‚¬μ©
QueryDSLμ λ¨λ“  κΈ°λ¥μ„ μ‚¬μ©ν•λ ¤λ©΄ `JPAQuery` κ°μ²΄λ¥Ό μ§μ ‘ μƒμ„±ν•΄μ„ μ‚¬μ©ν•΄μ•Ό ν•λ‹¤.
- μ΄λ• μ¤ν”„λ§ λ°μ΄ν„° JPAκ°€ μ κ³µν•λ” `QueryDslRepositorySupport` λ¥Ό μƒμ†λ°›μ•„ μ‚¬μ©ν•  μ μλ‹¤.

μ¤ν”„λ§ λ°μ΄ν„° JPAκ°€ μ κ³µν•λ” κ³µν†µ μΈν„°νμ΄μ¤λ” μ§μ ‘ κµ¬ν„ν•  μ μ—†κΈ° λ•λ¬Έμ— μ‚¬μ©μ μ •μ λ ν¬μ§€ν† λ¦¬λ¥Ό λ§λ“¤μ–΄μ•Ό ν•λ‹¤.
- `QueryDslRepositorySupport` λ¥Ό μ‚¬μ©ν•΄ QueryDSLλ΅ κ²€μƒ‰ μ΅°κ±΄μ— λ”°λΌ λ™μ μΌλ΅ μΏΌλ¦¬λ¥Ό μƒμ„±ν•λ‹¤.
  - μ°Έκ³ λ΅ μƒμ„±μμ—μ„ `QueryDslRepositorySupport` μ— μ—”ν‹°ν‹° ν΄λμ¤ μ •λ³΄λ¥Ό λ„κ²¨μ¤μ•Ό ν•λ‹¤.

## π“• μ¶μ²
**μλ°” ORM ν‘μ¤€ JPA ν”„λ΅κ·Έλλ°** - κΉ€μν•