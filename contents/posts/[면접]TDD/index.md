---
title: "💬 Test-Driven Development"
description: "개발 상식"
date: 2022-03-25
update: 2022-03-25
tags:
  - 개발상식
  - TDD
series: "💬 면접"
---

## 🧷 TDD란 무엇인가
Test-Driven Development는 **매우 짧은 개발 사이클의 반복에 의존하는 소프트웨어 개발 프로세스**이다. 
- 개발자는 요구되는 기능에 대한 자동화된 테스트 케이스를 작성하고, 해당 테스트를 통과하는 **가장 간단한 코드를 작성**한다. 
- 테스트를 통과하는 코드를 작성하고 상황에 맞게 **리팩토링**하는 과정을 거친다. 
- **"말 그대로 테스트가 코드 작성을 주도하는 개발방식"** 이다.

처음 이 개념을 접한 것은 "소프트웨어 설계"라는 강의에서이다. 이때는 "개발"에 대해 많이 생각해보지도 않았고, 큰 프로젝트 또한 진행해보지 않아 그냥 그런 개념이 있나보다 싶었다. 점차 프로젝트를 진행하면서, 개발 프로세스에는 어떤 것이 있고 실무에서는 어떠한 방식으로 협업을 진행하는가에 대해 알게 되면서 TDD를 다시 생각해보게 되었다.

## TDD 개발 주기
<img src="https://i0.wp.com/hanamon.kr/wp-content/uploads/2021/04/TDD-%E1%84%80%E1%85%A2%E1%84%87%E1%85%A1%E1%86%AF%E1%84%8C%E1%85%AE%E1%84%80%E1%85%B5.png?w=1024&ssl=1" width="60%">

1. RED : 실패하는 테스트 코드를 먼저 작성한다.
2. GREEN : 테스트 코드를 성공시키기 위한 실제 코드를 작성한다.
3. BLUE : 중복 코드 제거, 일반화 등의 리팩토링을 수행한다.

## 🧷 Test 추가
TDD(테스트 주도형 개발)에서는 새로운 기능을 추가하기 전 "테스트를 먼저 작성"한다. 테스트의 작성을 위해서는 해당 기능의 요구사항과 명세에 대한 분명한 이해가 수반되어야 한다. 
- 이는 개발자가 코드를 작성하기 전에 보다 요구사항에 집중할 수 있도록 돕는다. → **테스트 주도 개발이 주는 이점**

## 🧷 Run all tests and see if new one fails
어떤 기능을 추가하면 잘 작덩하던 기존 기능이 제대로 동작하지 않는 경우가 발생할 수 있다. 하지만 더 위험한 것은 개발자가 이를 인지하지 못하는 경우다. 
- 이것이 테스트 코드를 작성하는 이유다.
- 기능 추가마다 테스트 코드를 작성함으로써, 새 기능이 제대로 동작함과 동시에, 기존 기능들이 정상 동작하는지 확인할 수 있다.

## 🧷 Refactor code
'좋은 코드' 를 작성하는 것은 쉽지 않다. 고려해야 할 사항이 너무 많기 때문이다.
- 가독성을 위한 코딩 컨벤션
- 네이밍 컨벤션
- 확장성 고려
- 비즈니스 로직 고려
- 예외 처리
등이 있다.
물론 코드량이 적다면 모두 신경쓰며 작성하는 것이 가능하지만 많은 버그들을 디버깅하는 과정에서 코드는 점차 더러워지게 된다.

이러한 이유로 코드량이 방대해지면서, **리팩토링**이 필요해지게 된다. 그리고 이때, 테스트 코드가 그 중심을 잡아줄 수 있다.
- 코드량이 많은 함수를 여러 함수로 나누는 과정에서 해당 기능이 오작동하는지 간단히 테스트를 돌려봄으로써, 정상동작한다는 근거를 얻을 수 있다.
- 결과적으로 **리팩토링 속도를 증가**시키고 **코드의 퀄리티 또한 향상**시킬 수 있다.
  - 보다 객체지향적이고, 확장성이 좋은 코드, 재설계의 시간을 단축시킬 수 있는 코드, 디버깅 시간이 단축되는 코드를 탄생시킬 수 있다.

이렇게 보면, TDD를 왜 사용하지 않는가에 대해 의문을 품을 수 있다.

### 🗝 코드 생산성에 문제가 있지는 않나?
분명 코드량이 늘어나긴 한다. 비즈니스 로직, 각종 코드 디자인에도 많은 시간이 소요되는데, 추가로 테스트 코드까지 작성하기에는, 빠른 생산성이 요구되는 시점에서 큰 걸림돌이 될 수 있다.

### 🗝 테스트 코드를 작성하기가 쉬운가?
> 프로젝트를 진행하면서 가장 많이 생각했던 질문이다. <br/>
> 스프링 입문 강의를 보고 따라하면서 작성했을 때는 생각보다 되게 간단하게 구현한 로직을 테스트하는 줄 알았는데, 프로젝트를 진행하면서 테스트 코드를 작성하려 하니 어디서부터 어떻게 시작해야 할 지도 감이 잡히지 않았고, 내가 구현한 로직의 어떤 것을 최종적으로 확인해야 하는지 파악하는 것이 너무 어려웠다.

이 또한 큰 걸림돌이 된다. 진입 장벽이 존재한다는 것이다. 어떠한 부분을 테스트해야할 지, 어떻게 테스트해야할 지, 여러 테스트 프레임워크 중 어떤 것이 우리의 서비스와 맞는지 등 여러 부분에 대한 학습이 필요하고 적응하는데 시간이 걸린다.

### 🗝 모든 상황에 대해서 테스트 코드를 작성할 수 있는가? 작성해야 하는가?
항상 생각지도 못한 예외 케이스는 발생할 수 있다. 만약 테스트를 반드시 해야 하는 부분에 대한 테스트 코드를 작성하는데 어려움이 있다면 주객전도되는 상황이 발생할 수 있다. 즉, 실제 코드가 중심이 되어야 하는데, 테스트를 위해 실제 코드의 구조를 바꿔야 하나 싶은 상황인 것이다.

하지만 모든 코드에 대해 테스트 코드를 작성할 수 없으며, 그럴 필요도 없다. 또한 테스트 코드를 작성한다고 해서, 버그가 발생하지 않는 것도 아니다. 

💡 애초에 TDD는 100% coverage와 100% 무결성을 주장하지 않았다.

## 📕 참고
- [TDD](https://github.com/JaeYeopHan/Interview_Question_for_Beginner/tree/master/Development_common_sense#tdd)
- [TDD 개발주기](https://hanamon.kr/tdd%EB%9E%80-%ED%85%8C%EC%8A%A4%ED%8A%B8-%EC%A3%BC%EB%8F%84-%EA%B0%9C%EB%B0%9C/)