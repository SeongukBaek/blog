---
title: "π’» Dockerλ¥Ό μ΄μ©ν• Springboot λ°°ν¬"
description: "κ°λ° μƒμ‹"
date: 2022-04-18
update: 2022-04-18
tags:
  - Docker
  - SpringBoot
series: "π’» BackEnd"
---

## π”§ Dockerλ€

## π”§ μ¤ν”„λ§ μ„λ²„ λ°°ν¬ν•΄λ³΄κΈ°
### β‚οΈ μ¤ν”„λ§ μ„λ²„ μ¤€λΉ„
μ°μ„ , λ°°ν¬ν•  μ¤ν”„λ§ μ„λ²„κ°€ ν•„μ”ν•λ‹¤. [start.io](https://start.spring.io/) λ¥Ό μ΄μ©ν•μ—¬ μƒμ„±ν•λ‹¤.

<img src="../../images/springServer.png" width="80%">

μƒμ„±ν• μ΄ν›„, ν”„λ΅μ νΈκ°€ μ •μƒμ μΌλ΅ λ™μ‘ν•λ”μ§€ ν• λ² μ‹¤ν–‰ν•΄λ³΄λ„λ΅ ν•λ‹¤.

μ΄μ  Dockerμ—μ„ μ‚¬μ©ν•  `jar` νμΌμ„ λΉλ“ν•΄λ³Έλ‹¤. `build.gradle` νμΌμ„ μ—΄μ–΄ νμΌμ λΉλ“λ…μ„ μ§€μ •ν•΄μ¤€λ‹¤.

<img src="../../images/jarName.png" width="40%">

- μ„ κ²½μ°λ” `tabooDrug-0.0.1-SNAPSHOT.jar` μ΄λΌλ” μ΄λ¦„μΌλ΅ `jar` νμΌμ΄ μƒμ„±λλ‹¤.

μ΄ν›„ ν™”λ©΄ μ¤λ¥Έμ½μ `Gradle` -> `Tasks` -> `build` -> `build.sh` μ„ μ‹¤ν–‰ν•μ—¬ ν”„λ΅μ νΈλ¥Ό λΉλ“ν•λ‹¤.

<img src="../../images/gradleBuild.png" width="70%">

- λΉλ“κ°€ μ™„λ£λ¨μ„ ν„°λ―Έλ„μ—μ„ ν™•μΈν• ν›„, `build` -> `libs` λ””λ ‰ν† λ¦¬λ¥Ό ν™•μΈν•λ©΄ `jar` νμΌμ΄ μƒμ„±λ κ²ƒμ„ ν™•μΈν•  μ μλ‹¤.

λΉλ“λ `jar` νμΌμ€ ν„°λ―Έλ„μ—μ„ λ°”λ΅ μ‹¤ν–‰ν•  μ μλ‹¤. 
- `java -jar tabooDrug-0.0.1-SNAPSHOT.jar` λ…λ Ήμ–΄λ¥Ό μ΄μ©ν•μ—¬ μ‹¤ν–‰ν•΄λ³Έλ‹¤.

<img src="../../images/executeJar.png">

μ΄μ  μ΄ μ• ν”λ¦¬μΌ€μ΄μ…μ„ λ°°ν¬ν•  μ¤€λΉ„λ” λλ‚¬κ³ , Docker μ»¨ν…μ΄λ„λ΅ λ°°ν¬ν•κΈ° μ„ν• μ„¤μ •μ΄ ν•„μ”ν•λ‹¤.

### β‚οΈ Docker μ¤€λΉ„
μ°μ„  `Dockerfile` μ΄ ν•„μ”ν•λ‹¤. 
- μ΄λ” μ»¨ν…μ΄λ„ λ‚΄λ¶€ ν™κ²½μ„ μ •μν•κ³ , 
- `docker build` λ¥Ό ν†µν•΄ **docker image**λ¥Ό μƒμ„±ν•κ³ ,
- μƒμ„±λ **docker image**λ¥Ό ν†µν•΄ ν•­μƒ κ°™μ€ ν™κ²½μ—μ„μ μ»¨ν…μ΄λ„λ¥Ό κµ¬μ„±ν•λ‹¤.

<img src="../../images/createDockerfile.png">

- `openjdk:11` μ€ `openjdk11` μ΄ μ„¤μΉλ κΈ°λ³Έ OS ν™κ²½μ„ μλ―Έν•κ³ ,
- `EXPOSE 8080` λ” Host OSμ™€ μ—°κ²°ν•  ν¬νΈλ¥Ό μλ―Έν•κ³ ,
- `ADD` μ— μ •μν• νμΌμ„ μ΄λ―Έμ§€ `build` μ‹ μ¶”κ°€ν•λ‹¤μ μλ―Έμ΄λ‹¤.
- `ENTRYPOINT` λ” μ»¨ν…μ΄λ„κ°€ μ‹¤ν–‰λ  λ• λ¨Όμ € μ‹¤ν–‰ν•  λ…λ Ήμ–΄λ¥Ό λ°°μ—΄ ν•νƒλ΅ μ •μν•λ‹¤.

μ΄μ  μ‚¬μ©ν•  Dockerλ¥Ό ν™κ²½μ— λ§κ² μ„¤μΉν•λ‹¤. (μ„¤μΉ κ³Όμ •μ€ μƒλµ!) 

Dockerλ¥Ό λ°±κ·ΈλΌμ΄λ“μ—μ„ μ‹¤ν–‰μ‹ν‚¨ μ΄ν›„(Docker Desktop μ‹¤ν–‰), `Dockerfile` μ΄ μ„μΉν• κ²½λ΅λ΅ μ΄λ™ν•μ—¬ μ •μν• μ„¤μ •μ„ μ΄λ―Έμ§€λ΅ build ν•λ„λ΅ μ•„λμ λ…λ Ήμ–΄λ¥Ό μ‹¤ν–‰ν•λ‹¤.

```shell
docker build -t 'λ΅μ»¬ λ ν¬μ§€ν† λ¦¬λ…' .
```

<img src="../../images/dockerBuild.png">

μ„±κ³µμ μΌλ΅ λΉλ“κ°€ λμ—λ‹¤λ©΄, `docker images` λ΅ μ΄λ―Έμ§€ λ©λ΅μ„ ν™•μΈν•λ” λ…λ Ήμ–΄λ΅ ν™•μΈν•  μ μλ‹¤.

<img src="../../images/dockerImage.png" width="60%">

ν•΄λ‹Ή μ΄λ―Έμ§€λ¥Ό Docker μ»¨ν…μ΄λ„μ— μ¬λ ¤λ³Έλ‹¤.
- μ΄μ λ” μ• ν”λ¦¬μΌ€μ΄μ…μ΄ κµ¬λ™λλ” ν™κ²½μ΄ Host OSκ°€ μ•„λ‹, Docker μ—”μ§„ μ„μ— μ¬λΌκ°„ μ»¨ν…μ΄λ„μ΄λ‹¤.

<img src="../../images/onContainer.png">

### β‚οΈ Docker Hub μ‚¬μ©ν•κΈ°
githubμ²λΌ, Docker hubλ„ μ΅΄μ¬ν•λ‹¤. hubμ— μƒμ„±ν• μ΄λ―Έμ§€λ¥Ό μ¬λ ¤ λ‹¤λ¥Έ ν€μ›λ“¤λ„ μ‚¬μ©ν•  μ μλ„λ΅ ν•λ‹¤.

docker hub ν™νμ΄μ§€λ¥Ό μ΄μ©ν•λ” λ°©λ²•λ„ μμ§€λ§, IntelliJμ—μ„ μ κ³µν•λ” Docker pluginμ„ μ΄μ©ν•λ©΄ μ†μ‰½κ² hubμ— pushκ°€ κ°€λ¥ν•λ‹¤.

1. λ¨Όμ € docker pluginμ„ μ„¤μΉν•λ‹¤.
2. μ΄ν›„, IntelliJ μ•„λμ½μ `Service` -> `Docker` λ¥Ό μ°ν΄λ¦­ν•μ—¬ `Connect` ν•λ‹¤. λ΅κ·ΈμΈν• κ³„μ •κ³Ό μ—°κ²°ν•  μ μλ‹¤.
3. μ΄ν›„, `Docker` -> `Images` μ—μ„ κΈλ°© μƒμ„±ν• imageλ¥Ό ν™•μΈν•  μ μλ”λ°, μ΄λ¥Ό μ°ν΄λ¦­ν•μ—¬ `Push Image...` λ¥Ό ν΄λ¦­ν•λ‹¤.
4. `Registry` , `Namespace` , `Repository` , `Tag` λ¥Ό μ…λ ¥ν•λ”λ°, `Registry` λ¥Ό μƒμ„±ν•μ§€ μ•μ•λ‹¤λ©΄ μƒμ„±ν•λ‹¤. λ¨λ‘ μ…λ ¥ν• ν›„ PUSHλ¥Ό λ„λ¥΄κ³ , μ μ‹ κΈ°λ‹¤λ¦° ν›„ Docker hub ν™νμ΄μ§€λ¥Ό ν™•μΈν•λ©΄, ν•΄λ‹Ή `Registry` μ— μ¬λΌκ°„ κ²ƒμ„ ν™•μΈν•  μ μλ‹¤.

<img src="../../images/dockerRegistry.png">

μ΄μ  λ‚΄κ°€ μ¬λ¦° Docker imageλ¥Ό `docker pull` λ…λ Ήμ–΄λ¥Ό μ‚¬μ©ν•΄ λ‹¤μ΄λ°›μ•„ μ‚¬μ©ν•  μ μμ„ κ²ƒμ΄λ‹¤.

## π“• μ°Έκ³ 
- [μ¤ν”„λ§λ¶€νΈ μ–΄ν”λ¦¬μΌ€μ΄μ…μ„ λ„μ»¤μ»¨ν…μ΄λ„μ— λ°°ν¬ ν•΄λ³΄μ](https://parkjangwon.github.io/springboot/java/docker/2020/11/14/%EC%8A%A4%ED%94%84%EB%A7%81%EB%B6%80%ED%8A%B8-%EC%96%B4%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98%EC%9D%84-%EB%8F%84%EC%BB%A4%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88%EC%97%90-%EB%B0%B0%ED%8F%AC-%ED%95%B4%EB%B3%B4%EC%9E%90.html)
- [dockerfile μ—­ν• κ³Ό ν™μ© μ •λ¦¬](https://lejewk.github.io/docker-dockerfile/)